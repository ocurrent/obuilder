<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Docker (obuilder.Obuilder.Docker)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">obuilder</a> &#x00BB; <a href="../index.html">Obuilder</a> &#x00BB; Docker</nav><header class="odoc-preamble"><h1>Module <code><span>Obuilder.Docker</span></code></h1><p>Docker interface over the CLI tool</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-ids"><a href="#type-ids" class="anchor"></a><code><span><span class="keyword">type</span> ids</span><span> = </span><span>[ </span></code><ol><li id="type-ids.Docker_container" class="def constructor anchored"><a href="#type-ids.Docker_container" class="anchor"></a><code><span>| </span></code><code><span>`Docker_container <span class="keyword">of</span> string</span></code></li><li id="type-ids.Docker_image" class="def constructor anchored"><a href="#type-ids.Docker_image" class="anchor"></a><code><span>| </span></code><code><span>`Docker_image <span class="keyword">of</span> string</span></code></li><li id="type-ids.Docker_volume" class="def constructor anchored"><a href="#type-ids.Docker_volume" class="anchor"></a><code><span>| </span></code><code><span>`Docker_volume <span class="keyword">of</span> string</span></code></li><li id="type-ids.Obuilder_id" class="def constructor anchored"><a href="#type-ids.Obuilder_id" class="anchor"></a><code><span>| </span></code><code><span>`Obuilder_id <span class="keyword">of</span> string</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_prefix"><a href="#val-set_prefix" class="anchor"></a><code><span><span class="keyword">val</span> set_prefix : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the prefix for Docker images, containers, and volumes managed by the current OBuilder instance.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-obuilder_libexec"><a href="#val-obuilder_libexec" class="anchor"></a><code><span><span class="keyword">val</span> obuilder_libexec : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-obuilder_libexec_volume"><a href="#val-obuilder_libexec_volume" class="anchor"></a><code><span><span class="keyword">val</span> obuilder_libexec_volume : <span>?readonly:bool <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Config/Mount/index.html#type-t">Config.Mount.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-image_name"><a href="#val-image_name" class="anchor"></a><code><span><span class="keyword">val</span> image_name : <span>?tmp:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-container_name"><a href="#val-container_name" class="anchor"></a><code><span><span class="keyword">val</span> container_name : <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-volume_copy_name"><a href="#val-volume_copy_name" class="anchor"></a><code><span><span class="keyword">val</span> volume_copy_name : <span>?tmp:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-docker_image"><a href="#val-docker_image" class="anchor"></a><code><span><span class="keyword">val</span> docker_image : <span>?tmp:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Docker_image of string</span> ]</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-docker_container"><a href="#val-docker_container" class="anchor"></a><code><span><span class="keyword">val</span> docker_container : <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Docker_container of string</span> ]</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-docker_volume_cache"><a href="#val-docker_volume_cache" class="anchor"></a><code><span><span class="keyword">val</span> docker_volume_cache : <span>?tmp:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Docker_volume of string</span> ]</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-docker_volume_copy"><a href="#val-docker_volume_copy" class="anchor"></a><code><span><span class="keyword">val</span> docker_volume_copy : <span>?tmp:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../S/index.html#type-id">S.id</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Docker_volume of string</span> ]</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mount_point_inside_unix"><a href="#val-mount_point_inside_unix" class="anchor"></a><code><span><span class="keyword">val</span> mount_point_inside_unix : string</span></code></div><div class="spec-doc"><p>Mount point of Docker volumes inside Docker containers, Unix path style. Use with Cygwin tools.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mount_point_inside_native"><a href="#val-mount_point_inside_native" class="anchor"></a><code><span><span class="keyword">val</span> mount_point_inside_native : string</span></code></div><div class="spec-doc"><p>Mount point of Docker volumes inside Docker containers, native path style.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mount_args"><a href="#val-mount_args" class="anchor"></a><code><span><span class="keyword">val</span> mount_args : <span><a href="../Config/Mount/index.html#type-t">Config.Mount.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Get the CLI arguments to the Docker client to mount a volume.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bash_entrypoint"><a href="#val-bash_entrypoint" class="anchor"></a><code><span><span class="keyword">val</span> bash_entrypoint : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Get a Bash entrypoint in a Docker container to execute Bash scripts.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_entrypoint"><a href="#val-default_entrypoint" class="anchor"></a><code><span><span class="keyword">val</span> default_entrypoint : <span>string list</span></span></code></div><div class="spec-doc"><p>Get the default entrypoint of Docker container according to the host (Windows is cmd, everywhere else is sh).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setup_command"><a href="#val-setup_command" class="anchor"></a><code><span><span class="keyword">val</span> setup_command : <span>entp:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>cmd:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> string * <span>string list</span></span></code></div><div class="spec-doc"><p><code>setup_command ~entp ~cmd</code> returns the head of <code>entp</code>, to be give to Docker's <code>--entrypoint</code>, and the concatenation of the tail of <code>head</code> and <code>cmd</code> to be given to Docker command, as Docker <code>--entrypoint</code> takes only one argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cp_between_volumes"><a href="#val-cp_between_volumes" class="anchor"></a><code><span><span class="keyword">val</span> cp_between_volumes : 
  <span>base:<span>[&lt; <span>`Docker_image of string</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>src:<span>[&lt; <span>`Docker_volume of string</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>dst:<span>[ <span>`Docker_volume of string</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(unit, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Lwt_result</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Cmd"><a href="#module-Cmd" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Cmd/index.html">Cmd</a></span><span> : 
  <a href="../S/module-type-DOCKER_CMD/index.html">S.DOCKER_CMD</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../S/module-type-DOCKER_CMD/index.html#type-log">log</a></span> =
           <span>?stdout:<span>[ `Dev_null <span><span>| `FD_move_safely</span> of <span class="xref-unresolved">Obuilder__.Os.unix_fd</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
           <span>?stderr:<span>[ `Dev_null <span><span>| `FD_move_safely</span> of <span class="xref-unresolved">Obuilder__.Os.unix_fd</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
           <span class="type-var">'a</span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <a href="../S/module-type-DOCKER_CMD/index.html#type-logerr">logerr</a></span> =
           <span>?stderr:<span>[ `Dev_null <span><span>| `FD_move_safely</span> of <span class="xref-unresolved">Obuilder__.Os.unix_fd</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
           <span class="type-var">'a</span></span></span></code></div><div class="spec-doc"><p>Wrappers for various Docker client commands, exposing file descriptors.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Cmd_log"><a href="#module-Cmd_log" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Cmd_log/index.html">Cmd_log</a></span><span> : 
  <a href="../S/module-type-DOCKER_CMD/index.html">S.DOCKER_CMD</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../S/module-type-DOCKER_CMD/index.html#type-log">log</a></span> = <span>log:<a href="../Build_log/index.html#type-t">Build_log.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <a href="../S/module-type-DOCKER_CMD/index.html#type-logerr">logerr</a></span> = <span>log:<a href="../Build_log/index.html#type-t">Build_log.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></span></code></div><div class="spec-doc"><p>Wrappers for various Docker client commands, logging directly to the <a href="../Build_log/index.html"><code>Build_log</code></a>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Extract"><a href="#module-Extract" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Extract/index.html">Extract</a></span><span> : <a href="../S/module-type-FETCHER/index.html">S.FETCHER</a></span></code></div><div class="spec-doc"><p>Fetch (pull and extract) base images using Docker</p></div></div></div></body></html>